#!/bin/sh
# my bar!
#
# deps:
#  - wmutils
#  - github.com/charles-l/bin
#  - bspwm
#  - lemonbar
#
# charlie - (c) 2015

default_geometry() {
    # get screen size
    x=$(wattr w `lsw -r`)
    y=$(wattr h `lsw -r`)

    width=200
    height=30

    offy=$(($y - $height - 5))
    #offx=$(( x - x/2 - $width/2 ))
    offx=5

    echo "${width}x${height}+${offx}+${offy}"
}

lemoncommand() {
    lemonbar -d -g `default_geometry` -B '#000' -F'#333' \
        -f "-*-creep-*-*-*--*-*-*-*-*-*-*-*" -f "-*-siji-*-*-*--*-*-*-*-*-*-*-*"
}

while true
do
    VOL=`progbar $(volume | sed -e 's/%.*$//')`
    TIME=`date "+%H:%M"`
    echo "  ÓÅù $VOL %{r}$TIME  "
    sleep 0.5
done | lemoncommand
