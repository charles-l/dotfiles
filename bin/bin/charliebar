#!/bin/sh
# my bar!
#
# deps:
#  - lemonbar
#
# charlie - (c) 2015

default_geometry() {
    # get screen size
    x=$(wattr w `lsw -r`)
    y=$(wattr h `lsw -r`)

    width=160
    height=20

    offy=0 #$(($y - $height))
    #offx=$(( x - x/2 - $width/2 ))
    offx=$(($x - $width))

    echo "${width}x${height}+${offx}+${offy}"
}

lemoncommand() {
    lemonbar -d -g `default_geometry` -B '#000' -F'#AAA' \
        -f "-*-tewi-medium-*-*--*-*-*-*-*-*-*-*" #-f "-*-siji-*-*-*--*-*-*-*-*-*-*-*"
}

while true
do
    TIME=`date "+%H:%M %-m/%-d"`
    echo "  %{l} bat $(progbar $(acpi -b | cut -d',' -f2 | tr -d ' %')) %{r}$TIME"
    sleep 60
done | lemoncommand
